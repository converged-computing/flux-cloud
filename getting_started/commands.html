


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../_static/favicon.ico">
    
    
      
        <title>Commands - Flux Cloud</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.fa3fbbd75cfdd7cef.min.css" />
        <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
        <link rel="stylesheet" type="text/css" href="../_static/css/rtd_sphinx_search.min.css" />
        <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    


<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<!-- Social: Facebook / Open Graph -->
<title>Flux Cloud to run Flux Operator Experiments</title>
<link rel="canonical" href="https://converged-computing.github.io/flux-cloud/"/>
<meta property="og:type" content="website">

<meta property="og:url" content="https://converged-computing.github.io/flux-cloud/">
<meta property="og:title" content="Flux Cloud">
<meta property="og:image" content="https://raw.githubusercontent.com/converged-computing/flux-cloud/main/docs/images/logo.png">
<meta property="og:description" content="Flux Cloud to run Flux Operator Experiments">
<meta property="og:site_name" content="Flux Cloud">
<meta property="og:locale" content="en_US">

<!-- Social: Twitter -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@FluxFramework">
<meta name="twitter:title" content="Flux Framework">
<meta name="twitter:description" content="Flux Cloud to run Flux Operator Experiments">
<meta name="twitter:image" content="https://raw.githubusercontent.com/converged-computing/flux-cloud/main/docs/images/logo.png">

<!-- Social: Google+ / Schema.org  -->
<meta itemprop="name" content="Flux Cloud">
<meta itemprop="description" content="Flux Cloud to run Flux Operator Experiments">
<meta itemprop="image" content="https://raw.githubusercontent.com/converged-computing/flux-cloud/main/docs/images/logo.png">
<script type="application/ld+json">
  {"@type":"WebSite","headline":"Flux Cloud","url":"https://converged-computing.github.io/flux-cloud","description":"Flux Cloud to run Flux Operator Experiments","name":"Flux Cloud","@context":"https://schema.org"}
</script>

<style>
.material-symbols-outlined {
  font-variation-settings:
  'FILL' 0,
  'wght' 400,
  'GRAD' 0,
  'opsz' 48
}
.sphx-glr-script-out .highlight pre {
  background-color: #def0ff !important;
}
  </style>





  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Flux Cloud" class="md-header__button md-logo" aria-label="Flux Cloud" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Flux Cloud
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Commands
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/converged-computing/flux-cloud/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Flux Cloud
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="index.html" class="md-tabs__link md-tabs__link--active">
      <span class="md-ellipsis">Getting Started</span>
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../contributing.html" class="md-tabs__link">
      <span class="md-ellipsis">About</span>
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Flux Cloud" class="md-nav__button md-logo" aria-label="Flux Cloud" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    Flux Cloud
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/converged-computing/flux-cloud/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Flux Cloud
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_1">
          <span class="md-ellipsis">Getting Started</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Getting Started</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="index.html"><span title="/getting_started/index.md (reference label)" class="md-ellipsis">User Guide</span></a>
          
            <label for="__nav_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          <span title="/getting_started/index.md (reference label)" class="md-ellipsis">User Guide</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="install.html" class="md-nav__link">
        <span title="/getting_started/install.md (reference label)" class="md-ellipsis">Installation</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span title="/getting_started/commands.md (reference label)" class="md-ellipsis">Commands</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span title="/getting_started/commands.md (reference label)" class="md-ellipsis">Commands</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#experiment" class="md-nav__link">
    <span title="/getting_started/commands.md#experiment (reference label)" class="md-ellipsis">experiment</span>
  </a>
  
    <nav class="md-nav" aria-label="experiment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#init" class="md-nav__link">
    <span title="/getting_started/commands.md#init (reference label)" class="md-ellipsis">init</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list" class="md-nav__link">
    <span title="/getting_started/commands.md#list (reference label)" class="md-ellipsis">list</span>
  </a>
  
    <nav class="md-nav" aria-label="list">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#up" class="md-nav__link">
    <span title="/getting_started/commands.md#up (reference label)" class="md-ellipsis">up</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ways-to-run-jobs" class="md-nav__link">
    <span title="/getting_started/commands.md#ways-to-run-jobs (reference label)" class="md-ellipsis">Ways to run jobs</span>
  </a>
  
    <nav class="md-nav" aria-label="Ways to run jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apply-run" class="md-nav__link">
    <span title="/getting_started/commands.md#apply-run (reference label)" class="md-ellipsis">apply / run</span>
  </a>
  
    <nav class="md-nav" aria-label="apply / run">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apply" class="md-nav__link">
    <span title="/getting_started/commands.md#apply (reference label)" class="md-ellipsis">apply</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    <span title="/getting_started/commands.md#run (reference label)" class="md-ellipsis">run</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submit-batch" class="md-nav__link">
    <span title="/getting_started/commands.md#submit-batch (reference label)" class="md-ellipsis">submit / batch</span>
  </a>
  
    <nav class="md-nav" aria-label="submit / batch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#submit" class="md-nav__link">
    <span title="/getting_started/commands.md#submit (reference label)" class="md-ellipsis">submit</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch" class="md-nav__link">
    <span title="/getting_started/commands.md#batch (reference label)" class="md-ellipsis">batch</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#down" class="md-nav__link">
    <span title="/getting_started/commands.md#down (reference label)" class="md-ellipsis">down</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    <span title="/getting_started/commands.md#debug (reference label)" class="md-ellipsis">debug</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts" class="md-nav__link">
    <span title="/getting_started/commands.md#scripts (reference label)" class="md-ellipsis">scripts</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="examples.html" class="md-nav__link">
        <span title="/getting_started/examples.md (reference label)" class="md-ellipsis">Examples</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="experiments.html" class="md-nav__link">
        <span title="/getting_started/experiments.md (reference label)" class="md-ellipsis">Experiments</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="debugging.html" class="md-nav__link">
        <span title="/getting_started/debugging.md (reference label)" class="md-ellipsis">Debugging</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="settings.html" class="md-nav__link">
        <span title="/getting_started/settings.md (reference label)" class="md-ellipsis">Settings</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/index.html" class="md-nav__link">
        <span title="/tutorials/index.md (reference label)" class="md-ellipsis">Tutorials</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2">
          <span class="md-ellipsis">About</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">About</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing.html" class="md-nav__link">
        <span title="/contributing.md (reference label)" class="md-ellipsis">Contributing</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/license.html" class="md-nav__link">
        <span title="/about/license.md (reference label)" class="md-ellipsis">License</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/converged-computing/flux-cloud/blob/main/docs/getting_started/commands.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
  </a>

<h1 id="commands">Commands<a class="headerlink" href="#commands" title="Permalink to this heading">¶</a></h1>
<p>Welcome to the commands section! You can learn the details of each command below, or
check out an <a class="reference internal" href="examples.html"><span class="std std-doc">example</span></a> or <a class="reference internal" href="../tutorials/index.html"><span class="std std-doc">cloud tutorial</span></a>.
The general steps you want to take are:</p>
<ol class="arabic simple">
<li><p>Generate or find an <code class="docutils literal notranslate"><span class="pre">experiments.yaml</span></code> configuration.</p></li>
<li><p>Decide if you want to use <code class="docutils literal notranslate"><span class="pre">submit</span></code> or <code class="docutils literal notranslate"><span class="pre">apply</span></code></p></li>
<li><p>Create the cluster, run experiments, and clean up.</p></li>
</ol>
<p>If you don’t want to use an existing example, see <a class="reference internal" href="#init"><span class="xref myst">experiment init</span></a> for how to create an <code class="docutils literal notranslate"><span class="pre">experiments.yaml</span></code> from scratch.</p>
<blockquote>
<div><p>What’s the difference between submit and apply?</p>
</div></blockquote>
<p>For <code class="docutils literal notranslate"><span class="pre">apply</span></code>, we are running one job per Minicluster (the Flux Operator custom resource definition). This means
we bring up an entire set of pods for each container (each entry under “jobs” in your experiment.yaml),
run the single job directly with <code class="docutils literal notranslate"><span class="pre">flux</span> <span class="pre">start</span> <span class="pre">-&gt;</span> <span class="pre">flux</span> <span class="pre">submit</span></code> to provide the command to the broker, and then
when it finished the container will exit and the job clean up. This approach likely is suited to fewer jobs
that are longer running, and if you want to see output appear as it’s available (we stream the log from the broker pod).
For <code class="docutils literal notranslate"><span class="pre">apply</span></code> we also skip creating the <a class="reference internal" href="#https;//github.com/flux-framework/flux-restful-api"><span class="xref myst">Flux RESTFul API</span></a> server,
so it’s one less dependency to worry about, and you also don’t need to think about exposing an API or users.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">submit</span></code>, we take advantage of Flux as a scheduler, bringing up the fewest number of MiniClusters we can
derive based on the unique containers and sizes in your <code class="docutils literal notranslate"><span class="pre">experiments.yaml</span></code>. This means that, for each unique
set, we bring up one MiniCluster, and then submit all your jobs at once, allowing Flux to act as a scheduler.
We poll the server every 30 seconds to get an update on running jobs, and when they are all complete, jobs
output and results are saved. This approach is more ideal for many smaller jobs, as the MiniClusters are
only brought up once (and you don’t need to wait for pods to go up and down for each job). The cons of this
approach are getting logs at the end, unless you decide to interact with the Flux RESTFul API on your own
earlier.</p>
<p>Next, read about how to use these commands in detail.</p>
<h2 id="experiment">experiment<a class="headerlink" href="#experiment" title="Permalink to this heading">¶</a></h2>
<h3 id="init">init<a class="headerlink" href="#init" title="Permalink to this heading">¶</a></h3>
<p>When you want to create a new experiment, do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>my-experiment
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>my-experiment

<span class="c1"># Create a new experiment for minikube</span>
$<span class="w"> </span>flux-cloud<span class="w"> </span>experiment<span class="w"> </span>init<span class="w"> </span>--cloud<span class="w"> </span>minikube
$<span class="w"> </span>flux-cloud<span class="w"> </span>experiment<span class="w"> </span>init<span class="w"> </span>--cloud<span class="w"> </span>aws
$<span class="w"> </span>flux-cloud<span class="w"> </span>experiment<span class="w"> </span>init<span class="w"> </span>--cloud<span class="w"> </span>google
</code></pre></div>
</div>
<p>This will create an <code class="docutils literal notranslate"><span class="pre">experiments.yaml</span></code> template with custom variables for your
cloud of choice, and robustly commented.</p>
<details>
<summary>View Example Output of flux-cloud experiment init</summary>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>experiment<span class="w"> </span>init<span class="w"> </span>--cloud<span class="w"> </span>google<span class="w"> </span>&gt;<span class="w"> </span>experiments.yaml
</code></pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="nt">matrix</span><span class="p">:</span>
<span class="w">  </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">4</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="c1"># This is a Google Cloud machine</span>
<span class="w">  </span><span class="nt">machine</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">n1-standard-1</span><span class="p p-Indicator">]</span>

<span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Customize zone just for this experiment</span>
<span class="w">    </span><span class="c1"># otherwise defaults to your settings.yml</span>
<span class="w">    </span><span class="nt">zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-central1-a</span>

<span class="c1"># Flux MiniCluster experiment attributes</span>
<span class="nt">minicluster</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-job</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flux-operator</span>
<span class="w">  </span><span class="c1"># Each of these sizes will be brought up and have commands run across it</span>
<span class="w">  </span><span class="c1"># They must be smaller than the Kubernetes cluster size or not possible to run!</span>
<span class="w">  </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4</span><span class="p p-Indicator">]</span>

<span class="c1"># Under jobs should be named jobs (output orgainzed by name) where</span>
<span class="c1"># each is required to have a command and image. Repeats is the number</span>
<span class="c1"># of times to run each job</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">reaxc-hns</span><span class="p">:</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lmp</span><span class="nv"> </span><span class="s">-v</span><span class="nv"> </span><span class="s">x</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">-v</span><span class="nv"> </span><span class="s">y</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">-v</span><span class="nv"> </span><span class="s">z</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">-in</span><span class="nv"> </span><span class="s">in.reaxc.hns</span><span class="nv"> </span><span class="s">-nocite&#39;</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/rse-ops/lammps:flux-sched-focal-v0.24.0</span>
<span class="w">    </span><span class="nt">repeats</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">working_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/flux/examples/reaxff/HNS</span>
<span class="w">  </span><span class="nt">sleep</span><span class="p">:</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;sleep</span><span class="nv"> </span><span class="s">5&#39;</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/rse-ops/lammps:flux-sched-focal-v0.24.0</span>
<span class="w">    </span><span class="nt">repeats</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">working_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/flux/examples/reaxff/HNS</span>
<span class="w">  </span><span class="nt">hello-world</span><span class="p">:</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;echo</span><span class="nv"> </span><span class="s">hello</span><span class="nv"> </span><span class="s">world&#39;</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/rse-ops/lammps:flux-sched-focal-v0.24.0</span>
<span class="w">    </span><span class="nt">repeats</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">working_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/flux/examples/reaxff/HNS</span>
</code></pre></div>
</div>
</details>
<h2 id="list">list<a class="headerlink" href="#list" title="Permalink to this heading">¶</a></h2>
<p>After creating an experiments.yaml file, you might want to know how your matrix maps out into kubernetes
clusters. To see all identifiers generated, you can use list:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>list
k8s-size-8-m5.large
<span class="w">  </span>sizes:
<span class="w">    </span><span class="m">2</span>:<span class="w"> </span>k8s-size-8-m5.large<span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="m">4</span>:<span class="w"> </span>k8s-size-8-m5.large<span class="w"> </span><span class="m">4</span>
<span class="w">    </span><span class="m">6</span>:<span class="w"> </span>k8s-size-8-m5.large<span class="w"> </span><span class="m">6</span>
<span class="w">    </span><span class="m">8</span>:<span class="w"> </span>k8s-size-8-m5.large<span class="w"> </span><span class="m">8</span>
</code></pre></div>
</div>
<p>The above shows for the kubernetes cluster of size 8 with machine type <code class="docutils literal notranslate"><span class="pre">m5.large</span></code> we are experiments
with MiniClusters of sizes 2, 4, 6, 8</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># This can obviously be expanded to more sizes or machines,</span>
<span class="nt">matrix</span><span class="p">:</span>
<span class="w">  </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">  </span><span class="nt">machine</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;n1-standard-1&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;n1-standard-2&quot;</span><span class="p p-Indicator">]</span>

<span class="nt">minicluster</span><span class="p">:</span>
<span class="w">  </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8</span><span class="p p-Indicator">]</span>
</code></pre></div>
</div>
<p>You can also target a specific experiment cluster (meaning Kubernetes size)
with <code class="docutils literal notranslate"><span class="pre">-e</span></code> for any command, e.g.,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>apply<span class="w"> </span>-e<span class="w"> </span>k8s-size-8-m5.large
</code></pre></div>
</div>
<p>And this will run across sizes. To ask for a specific size:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>apply<span class="w"> </span>-e<span class="w"> </span>k8s-size-8-m5.large<span class="w"> </span>--size<span class="w"> </span><span class="m">2</span>
</code></pre></div>
</div>
<h3 id="up">up<a class="headerlink" href="#up" title="Permalink to this heading">¶</a></h3>
<p>Here is how to bring up a cluster (with the operator installed). For this command,
we will either select the first in the matrix (default):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>up
</code></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="go">No experiment ID provided, assuming first experiment n1-standard-1-2.</span>
</code></pre></div>
</div>
<p>or if you want to specify an experiment identifier based on the machine and size, you can do that:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>up<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2
</code></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="go">Selected experiment n1-standard-1-2.</span>
</code></pre></div>
</div>
<p>And to force up without a prompt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>up<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2<span class="w"> </span>--force-cluster
</code></pre></div>
</div>
<h2 id="ways-to-run-jobs">Ways to run jobs<a class="headerlink" href="#ways-to-run-jobs" title="Permalink to this heading">¶</a></h2>
<p>The following commands are provided by Flux Cloud. For running jobs, you can either do:</p>
<ul class="simple">
<li><p><strong>apply</strong>/<strong>run</strong>: A single/multi job submission intended for different containers to re-create pods each time.</p></li>
<li><p><strong>batch</strong>/<strong>submit</strong>: A batch mode, where we submit / schedule many jobs on the fewest MiniClusters</p></li>
</ul>
<p>Both are described in the following sections.</p>
<h3 id="apply-run">apply / run<a class="headerlink" href="#apply-run" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>Ideal for running multiple jobs with different containers.</p>
</div></blockquote>
<p>An apply assumes that you want to create a separate MiniCluster each time, meaning
bringing up an entire set of pods, running a single command, and then bringing everything
down. This is ideal for longing running experiments, but note that it does not take advantage
of using Flux as a scheduler. Flux is basically running one job and going away.</p>
<h4 id="apply">apply<a class="headerlink" href="#apply" title="Permalink to this heading">¶</a></h4>
<p>After “up” you can choose to run experiments (as you feel) with “apply.”</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>apply
</code></pre></div>
</div>
<p>The same convention applies - not providing the identifier runs the
first entry, otherwise we use the identifier you provide.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>apply<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2
</code></pre></div>
</div>
<p>To force overwrite of existing results (by default they are skipped)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>apply<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2<span class="w"> </span>--force
</code></pre></div>
</div>
<p>Apply is going to be creating on CRD per job, so that’s a lot of
pod creation and deletion. This is in comparison to “submit” that
brings up a MiniCluster once, and then executes commands to it, allowing
Flux to serve as the scheduler. Note that by default, we always wait for a previous run to be cleaned up
before continuing. If you don’t want apply to be interactive (e.g., it will
ask you before cleaning up) you can do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>apply<span class="w"> </span>--non-interactive
</code></pre></div>
</div>
<p>By default, apply via a “run” is non-interactive.</p>
<h4 id="run">run<a class="headerlink" href="#run" title="Permalink to this heading">¶</a></h4>
<p>The main command is a “run” that is going to, for each cluster:</p>
<ol class="arabic simple">
<li><p>Create the cluster</p></li>
<li><p>Run each of the experiments, saving output and timing</p></li>
<li><p>Bring down the cluster</p></li>
</ol>
<p>And output will be organized based on executor, machine, size, and command identifier. E.g.,:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>data/
└──<span class="w"> </span>aws
<span class="w">    </span>└──<span class="w"> </span>k8s-size-8-hpc6a.48xlarge
<span class="w">        </span>├──<span class="w"> </span>_lmp-8-1-minicluster-size-8
<span class="w">        </span>│<span class="w">   </span>└──<span class="w"> </span>log.out
<span class="w">        </span>├──<span class="w"> </span>lmp-8-2-minicluster-size-8
<span class="w">        </span>│<span class="w">   </span>└──<span class="w"> </span>log.out
<span class="w">        </span>├──<span class="w"> </span>lmp-8-3-minicluster-size-8
<span class="w">        </span>│<span class="w">   </span>└──<span class="w"> </span>log.out
<span class="w">        </span>├──<span class="w"> </span>lmp-8-4-minicluster-size-8
<span class="w">        </span>│<span class="w">   </span>└──<span class="w"> </span>log.out
<span class="w">        </span>├──<span class="w"> </span>lmp-8-5-minicluster-size-8
<span class="w">        </span>│<span class="w">   </span>└──<span class="w"> </span>log.out
<span class="w">        </span>└──<span class="w"> </span>meta.json
</code></pre></div>
</div>
<p>In the above, the top level directory <code class="docutils literal notranslate"><span class="pre">aws</span></code> corresponds to the flux-cloud cloud backend,
the second level <code class="docutils literal notranslate"><span class="pre">k8s-size-64-hpc6a.48xlarge</span></code> corresponds to our
Kubernetes cluster size and machine type, and the subdirectories under that correspond
to specific jobs and repeat numbers and sizes, and the <code class="docutils literal notranslate"><span class="pre">meta.json</span></code> includes a summary
of your experiments across those in json. Thus, to run everything:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>run
</code></pre></div>
</div>
<p>or for entirely headless (no ask for confirmation to create/delete clusters):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>run<span class="w"> </span>--force-cluster
</code></pre></div>
</div>
<p>To force overwrite of existing results (by default they are skipped)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>run<span class="w"> </span>--force
</code></pre></div>
</div>
<p>Ask for a specific cloud:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>run<span class="w"> </span>--cloud<span class="w"> </span>aws
</code></pre></div>
</div>
<p>If you want to have more control, you can run one Kubernetes size (across MiniCluster sizes) at a time,
each of “up” “apply” and “down”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>up<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2
$<span class="w"> </span>flux-cloud<span class="w"> </span>apply<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2
$<span class="w"> </span>flux-cloud<span class="w"> </span>down<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2
</code></pre></div>
</div>
<h3 id="submit-batch">submit / batch<a class="headerlink" href="#submit-batch" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>Ideal for one or more commands and/or containers across persistent MiniClusters.</p>
</div></blockquote>
<p>These commands submit multiple jobs to the same MiniCluster and actually use Flux
as a scheduler! This means we get the unique set of images and MiniCluster sizes for
your experiments, and then bring up each one, submitting the matching jobs to it.
We submit all jobs at once, and then poll Flux until they are completed to get output.</p>
<h4 id="submit">submit<a class="headerlink" href="#submit" title="Permalink to this heading">¶</a></h4>
<p>The entire flow might look like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>up<span class="w"> </span>--cloud<span class="w"> </span>minikube
$<span class="w"> </span>flux-cloud<span class="w"> </span>submit<span class="w"> </span>--cloud<span class="w"> </span>minikube
$<span class="w"> </span>flux-cloud<span class="w"> </span>down<span class="w"> </span>--cloud<span class="w"> </span>minikube
</code></pre></div>
</div>
<p>The submit will always check if the MiniCluster is already created, and if not, create it
to submit jobs. For submit (and the equivalent to bring it up and down with batch)
your commands aren’t provided in the CRD,
but rather to the Flux Restful API. Submit / batch will also generate one CRD
per MiniCluster size, but use the same MiniCluster across jobs. This is different
from apply, which generates one CRD per job to run. If you don’t want submit to be interactive
(e.g., it will ask you before cleaning up) you can do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>submit<span class="w"> </span>--non-interactive
</code></pre></div>
</div>
<p>By default, submit run with batch is non-interactive.</p>
<h4 id="batch">batch<a class="headerlink" href="#batch" title="Permalink to this heading">¶</a></h4>
<p>This is the equivalent of “submit” but includes the up and down for the larger
Kubernetes cluster.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>batch<span class="w"> </span>--cloud<span class="w"> </span>aws
</code></pre></div>
</div>
<p>This command is going to:</p>
<ol class="arabic simple">
<li><p>Create the cluster</p></li>
<li><p>Run each of the experiments, saving output and timing, on the same pods</p></li>
<li><p>Bring down the cluster</p></li>
</ol>
<p>The output is organized in the same way,</p>
<p>Note that since we are communicating with the FluxRestful API, you are required to
provide a <code class="docutils literal notranslate"><span class="pre">FLUX_USER</span></code> and <code class="docutils literal notranslate"><span class="pre">FLUX_TOKEN</span></code> for the API. If you are running this programmatically,
the Flux Restful Client will handle this, however if you, for example, press control C to
cancel a run, you’ll need to copy paste the username and token that was previously shown
before running submit again to continue where you left off. Batch is equivalent to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>up
$<span class="w"> </span>flux-cloud<span class="w"> </span>submit
$<span class="w"> </span>flux-cloud<span class="w"> </span>down
</code></pre></div>
</div>
<h2 id="down">down<a class="headerlink" href="#down" title="Permalink to this heading">¶</a></h2>
<p>And then bring down your first (or named) cluster:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>down
$<span class="w"> </span>flux-cloud<span class="w"> </span>down<span class="w"> </span>-e<span class="w"> </span>n1-standard-1-2
</code></pre></div>
</div>
<p>Or all your experiment clusters:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>down<span class="w"> </span>--all
</code></pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">--force-cluster</span></code> here:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>down<span class="w"> </span>--force-cluster
</code></pre></div>
</div>
<h2 id="debug">debug<a class="headerlink" href="#debug" title="Permalink to this heading">¶</a></h2>
<p>For any command, you can add <code class="docutils literal notranslate"><span class="pre">--debug</span></code> as a main client argument to see additional information. E.g.,
the cluster config created for eksctl:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux-cloud<span class="w"> </span>--debug<span class="w"> </span>up
</code></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="go">No experiment ID provided, assuming first experiment m5.large-2.</span>
<span class="go">apiVersion: eksctl.io/v1alpha5</span>
<span class="go">kind: ClusterConfig</span>

<span class="go">metadata:</span>
<span class="go">  name: flux-cluster</span>
<span class="go">  region: us-east-1</span>
<span class="go">  version: 1.23</span>

<span class="gp"># </span>availabilityZones:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;us-east-1a&quot;</span>,<span class="w"> </span><span class="s2">&quot;us-east-1b&quot;</span>,<span class="w"> </span><span class="s2">&quot;us-east-1d&quot;</span><span class="o">]</span>
<span class="go">managedNodeGroups:</span>
<span class="go">  - name: workers</span>
<span class="go">    instanceType: m5.large</span>
<span class="go">    minSize: 2</span>
<span class="go">    maxSize: 2</span>
<span class="go">    labels: { &quot;fluxoperator&quot;: &quot;true&quot; }</span>
<span class="go">...</span>
</code></pre></div>
</div>
<h2 id="scripts">scripts<a class="headerlink" href="#scripts" title="Permalink to this heading">¶</a></h2>
<p>Flux cloud (prior to version 0.2.0) ran each job with a script, and it would save each script. Since version 0.2.0,
we refactored to do everything with Python APIs/SDKs, so we no longer save submit scripts. However, we still save
scripts for bringing up an down each cluster, along with node and pod metadata (as json). We save this in in the
hidden <code class="docutils literal notranslate"><span class="pre">.scripts</span></code> directory.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="gp">$ </span>tree<span class="w"> </span>-a<span class="w"> </span>./data/
<span class="go">./data/</span>
<span class="go">└── minikube</span>
<span class="go">    └── k8s-size-4-local</span>
<span class="go">        ├── lmp-size-2-minicluster-size-2</span>
<span class="go">        │   └── log.out</span>
<span class="go">        ├── lmp-size-4-minicluster-size-4</span>
<span class="go">        │   └── log.out</span>
<span class="go">        ├── meta.json</span>
<span class="go">        └── .scripts</span>
<span class="go">            ├── minicluster-size-2-lammps-job-ghcr.io-rse-ops-lammps-flux-sched-focal-v0.24.0.json</span>
<span class="go">            ├── nodes-2-lammps-job-ghcr.io-rse-ops-lammps-flux-sched-focal-v0.24.0.json</span>
<span class="go">            └── pods-size-2-lammps-job-ghcr.io-rse-ops-lammps-flux-sched-focal-v0.24.0.json</span>
</code></pre></div>
</div>
<p>And that’s it! We recommend you look at <a class="reference internal" href="examples.html"><span class="std std-doc">examples</span></a> or <a class="reference internal" href="../tutorials/index.html"><span class="std std-doc">tutorials</span></a> for
getting started. If you are brave, just run <code class="docutils literal notranslate"><span class="pre">flux-cloud</span> <span class="pre">experiment</span> <span class="pre">init</span> <span class="pre">--cloud</span> <span class="pre">&lt;cloud&gt;</span></code> to create
your own experiment from scratch.</p>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      Mar 06, 2023
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="install.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="examples.html" class="md-footer__link md-footer__link--next" aria-label="Next: Examples" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Examples
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2022, Flux Developers.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    6.1.3.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/converged-computing/flux-cloud" target="_blank" rel="noopener" title="Flux Cloud on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    <a href="https://flux-framework.org/" target="_blank" rel="noopener" title="Flux Framework" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2.05c5.05.5 9 4.77 9 9.95 0 1.45-.32 2.83-.88 4.07l-2.62-1.53c.32-.79.5-1.64.5-2.54 0-3.53-2.61-6.43-6-6.92V2.05M12 19c2.21 0 4.17-1 5.45-2.62l2.6 1.53A9.97 9.97 0 0 1 12 22C6.47 22 2 17.5 2 12a9.99 9.99 0 0 1 9-9.95v3.03C7.61 5.57 5 8.47 5 12a7 7 0 0 0 7 7m0-13a6 6 0 0 1 6 6c0 2.97-2.16 5.44-5 5.92v-3.09c1.17-.41 2-1.52 2-2.83a3 3 0 0 0-3-3l-.55.05-1.54-2.67C10.56 6.13 11.26 6 12 6m-6 6c0-1.86.85-3.5 2.18-4.62l1.54 2.67C9.27 10.57 9 11.26 9 12c0 1.31.83 2.42 2 2.83v3.09c-2.84-.48-5-2.95-5-5.92Z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.tabs", "toc.integrate", "navigation.sections", "navigation.instant", "header.autohide", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "toc.follow", "toc.sticky", "content.tabs.link", "announce.dismiss"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.cea6a0c1d5b0618cf.min.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/js/rtd_sphinx_search.min.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
  </body>
</html>